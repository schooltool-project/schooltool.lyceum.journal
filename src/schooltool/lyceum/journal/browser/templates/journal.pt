<html metal:use-macro="view/@@standard_macros/page" i18n:domain="schooltool.lyceum.journal">
<head>
  <title metal:fill-slot="title"
         i18n:translate="">
      <tal:block i18n:name="section" tal:replace="view/context/section/label" />
      journal for <tal:block i18n:name="month" tal:replace="python: view.monthTitle(view.active_month)" /> <tal:block i18n:name="year" tal:replace="view/active_year" /></title>

  <title  i18n:translate=""
    ><span i18n:name="section" tal:replace="view/context/section/label"/> journal</title>
</head>

<tal:block metal:fill-slot="extrahead">
  <!--[if !IE]>-->
    <link type="text/css" rel="stylesheet" href="journal_non_ie.css"
          tal:attributes="href context/++resource++journal_non_ie.css" />
  <!--<![endif]-->
  <script tal:content="string: var here = '${context/@@absolute_url}/';"/>
  <script language="javascript" type="text/javascript"
	  tal:content="view/keyCodeInitialization"></script>
  <script language="javascript" type="text/javascript"
	  tal:attributes="src context/++resource++schooltool.lyceum.journal.js">
  </script>
</tal:block>

<metal:block metal:fill-slot="content-header">
    <h1 i18n:translate="">
      <tal:block i18n:name="section" tal:replace="view/context/section/label" />
      journal for <tal:block i18n:name="month" tal:replace="python: view.monthTitle(view.active_month)" /> <tal:block i18n:name="year" tal:replace="view/active_year" /></h1>
</metal:block>

<metal:block metal:fill-slot="body">
  <form action="." method="post" tal:attributes="action request/URL">

    <div class="lesson-description">
      <tal:block condition="request/event_id|nothing"
                 define="meeting view/selectedEvent">
        <table>
          <tr>
            <td i18n:translate="">
                Personal lesson description for
                <tal:block i18n:name="date" content="meeting/dtstart/@@shortDate" />
                period
                <tal:block i18n:name="period" content="meeting/period_id" />
            </td>
            <td i18n:translate="">
                Public lesson description for
                <tal:block i18n:name="date" content="meeting/dtstart/@@shortDate" />
                period
                <tal:block i18n:name="period" content="meeting/period_id" />
            </td>
          </tr>
          <tr>
            <td>
              <tal:block tal:content="structure view/teacher_description_widget" />
            </td>
            <td>
              <tal:block tal:content="structure view/public_description_widget" />
            </td>
          </tr>
        </table>
      </tal:block>
    </div>

    <input tal:condition="request/month|nothing"
           type="hidden"
           name="month"
           tal:attributes="value request/month" />
    <input tal:condition="request/event_id|nothing"
           type="hidden"
           name="event_id"
           tal:attributes="value request/event_id" />
    <input tal:condition="request/student|nothing"
           type="hidden"
           name="student"
           tal:attributes="value request/student" />

    <div>
      <span tal:repeat="month_id view/monthsInSelectedTerm">
        <tal:if condition="python: month_id != view.active_month">
          <a tal:attributes="href python: view.monthURL(month_id)"
             tal:content="python: view.monthTitle(month_id)" />
        </tal:if>
        <tal:if condition="python: month_id == view.active_month">
          <tal:block tal:replace="python: view.monthTitle(month_id)" />
        </tal:if>
      </span>
      <span>
        <a tal:attributes="href string:${context/@@absolute_url}/term_grades.html"
           i18n:translate="">Term Grading</a>
      </span>
    </div>

    <div class="gradebook">
      <tal:block replace="structure view/gradebook/render" />
    </div>

    <div class="controls">
      <tal:block metal:use-macro="view/@@standard_macros/update-button" />
    </div>

  </form>
</metal:block>
</html>
